@model Neighborly_3.Models.Task2

@{

    ViewBag.Title = "You want to offer help";
}

<h2>Task Details</h2>

<div>
    <h4>Here are the Details</h4>
    <hr />
    <dl class="dl-horizontal">

        <dt>
            @Html.DisplayNameFor(model => model.TaskTitle)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.TaskTitle)
        </dd>


        <dt>
            @Html.DisplayNameFor(model => model.TaskDescription)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.TaskDescription)
        </dd>


        <dt>
            @Html.DisplayNameFor(model => model.IsDone)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.IsDone)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.TimeStamp)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.TimeStamp)
        </dd>

        @*<dt>
                @Html.DisplayNameFor(model => model.IsAssigned)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.IsAssigned)
            </dd>*@

        @*<dt>
                @Html.DisplayNameFor(model => model.HelpProviderID)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.HelpProviderID)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.TaskCreatorID)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.TaskCreatorID)
            </dd>*@
    </dl>
</div>

<body>
    <div id="map"></div>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
    <script>
        var geocoder;
        var map;
        function initMap() {
            var myLatlng = { lat: -25.363, lng: 131.044 };

            geocoder = new google.maps.Geocoder();

            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 16,
                center: myLatlng
            });

            codeAddress('@(ViewBag.Address)');

            //var marker = new google.maps.Marker({
            //    position: myLatlng,
            //    map: map,
            //    title: 'Click to zoom'
            //});

            //map.addListener('center_changed', function () {
            //    // 3 seconds after the center of the map has changed, pan back to the
            //    // marker.
            //    window.setTimeout(function () {
            //        map.panTo(marker.getPosition());
            //    }, 3000);
            //});

            //marker.addListener('click', function () {
            //    map.setZoom(8);
            //    map.setCenter(marker.getPosition());
            //});
        }
        function codeAddress(address) {
            geocoder.geocode({ address: address }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);//center the map over the result
                    //place a marker at the location
                    var marker = new google.maps.Marker(
                    {
                        map: map,
                        position: results[0].geometry.location,
                        title:'@(Model.TaskTitle)'
                    });
                } else {
                    alert('Geocode was not successful for the following reason: ' + status);
                }
            });
        }
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBMajs03Y1NZL22_FwdbC-_pv11PxbibJg&callback=initMap">
    </script>
</body>

<div>
    @Html.ActionLink("Message the task creator", "Create", "Messages", new { id = Model.TaskID }, new { @class = "btn btn-default", role = "button" })
</div>

<p>
    @Html.ActionLink("Offer Help", "Edit", new { id = Model.TaskID }, new { @class = "btn btn-default", role = "button" })<text> </text>) |
    @Html.ActionLink("Back to List", "Index")
</p>
@*@Html.ActionLink("Edit", "Edit", new { id = item.TaskID }, new { @class = "btn btn-default", role = "button" })<text> </text>*@